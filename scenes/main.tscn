[gd_scene load_steps=7 format=3 uid="uid://ch7e8r5h7a6kn"]

[ext_resource type="Script" uid="uid://cuvnn7gbm0hv2" path="res://scripts/mouse_mode_manager.gd" id="1_0wfyh"]
[ext_resource type="PackedScene" uid="uid://bdra44ss3dhfn" path="res://scenes/world_test.tscn" id="2_tefeu"]
[ext_resource type="PackedScene" uid="uid://cuwbviq8y2olc" path="res://scenes/prefabs/player.tscn" id="3_o6xl0"]
[ext_resource type="Shader" uid="uid://dx5nf4q1nlup3" path="res://resources/shaders/lit.gdshader" id="4_tipki"]
[ext_resource type="Script" uid="uid://dcpt6cetftqh7" path="res://scripts/conversation/conversation_manager.gd" id="5_85g3d"]

[sub_resource type="ShaderMaterial" id="ShaderMaterial_choun"]
resource_local_to_scene = true
render_priority = 0
shader = ExtResource("4_tipki")
shader_parameter/albedo_colour = Color(0.490196, 0.501961, 0.541176, 1)
shader_parameter/roughness = 0.87
shader_parameter/metallic = 0.0
shader_parameter/specular = 0.5
shader_parameter/emission = Color(0, 0, 0, 1)
shader_parameter/uv_scale = Vector2(1, 1)
shader_parameter/normal_scale = 1.0

[node name="Base" type="Control"]
texture_filter = 1
texture_repeat = 1
layout_mode = 3
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2

[node name="MouseManager" type="Node" parent="."]
process_mode = 3
script = ExtResource("1_0wfyh")

[node name="WorldViewport" type="SubViewportContainer" parent="."]
process_mode = 1
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
stretch = true

[node name="SubViewport" type="SubViewport" parent="WorldViewport"]
transparent_bg = true
handle_input_locally = false
audio_listener_enable_3d = true
size = Vector2i(240, 135)
render_target_update_mode = 4

[node name="WorldTest" parent="WorldViewport/SubViewport" instance=ExtResource("2_tefeu")]

[node name="Player" parent="WorldViewport/SubViewport" instance=ExtResource("3_o6xl0")]
surface_material = SubResource("ShaderMaterial_choun")

[node name="ConversationScreen" type="Control" parent="." node_paths=PackedStringArray("vignette_viewport")]
process_mode = 3
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
script = ExtResource("5_85g3d")
vignette_viewport = NodePath("VignetteViewport/SubViewport")

[node name="VignetteViewport" type="SubViewportContainer" parent="ConversationScreen"]
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
stretch = true

[node name="SubViewport" type="SubViewport" parent="ConversationScreen/VignetteViewport"]
transparent_bg = true
handle_input_locally = false
canvas_item_default_texture_filter = 0
audio_listener_enable_2d = true
audio_listener_enable_3d = true
size = Vector2i(240, 135)

[node name="Panel" type="Panel" parent="ConversationScreen"]
layout_mode = 1
anchors_preset = -1
anchor_top = 0.6
anchor_right = 1.0
anchor_bottom = 1.0
offset_left = 12.0
offset_right = -12.0
offset_bottom = -8.0
grow_horizontal = 2
grow_vertical = 0

[node name="Label" type="Label" parent="ConversationScreen/Panel"]
layout_mode = 1
anchors_preset = -1
anchor_right = 1.0
anchor_bottom = 1.0
offset_left = 8.0
offset_top = 8.0
offset_right = -8.0
offset_bottom = -8.0
grow_horizontal = 2
grow_vertical = 2
text = "Lorem Ipsum Dolor Sit"
